name: build

on: [push, workflow_dispatch]

jobs:

  test:
    name: RunTestsGroup1
    runs-on: ubuntu-latest
    steps:
        - name: Checkout
          uses: actions/checkout@v4
        - name: Test SampleTests
          uses: ./.github/actions/dotnet_test_with_autoretry
          with:
            tests_filter: Category=Group1
            test_results_file_name_prefix: TestsGroup1-attempt-${{github.run_attempt}}
            test_results_artifact_name: Test Results Group1 for Attempt-${{github.run_attempt}}

  testGroup2:
    name: RunTestsGroup2
    runs-on: ubuntu-latest
    steps:
        - name: Checkout
          uses: actions/checkout@v4
        - name: Test SampleTests
          uses: ./.github/actions/dotnet_test_with_autoretry
          with:
            tests_filter: Category=Group2
            test_results_file_name_prefix: TestsGroup2-attempt-${{github.run_attempt}}
            test_results_artifact_name: Test Results Group2 for Attempt-${{github.run_attempt}}
    